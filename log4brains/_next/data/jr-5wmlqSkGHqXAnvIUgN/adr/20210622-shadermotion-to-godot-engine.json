{"pageProps":{"projectName":"V-Sekai","currentAdr":{"slug":"20210622-shadermotion-to-godot-engine","package":null,"title":"Convert ShaderMotion to be played in Godot Engine","status":"accepted","supersededBy":null,"tags":[],"deciders":[],"body":{"enhancedMdx":"\n## Context and Problem Statement\n\nWe want a better way of importing animations to Godot Engine. Unfortunately, there is no standard way to exchange motion from other places to Godot and work interchangeably on different characters.\n\n## Describe the proposed option and how it helps to overcome the problem or limitation\n\nShaderMotion files in video format provide an excellent way to record motion. However, we want the ability to play it back in Godot Engine onto a VRM character.\n\n## Describe how your proposal will work, with code, pseudo-code, mock-ups, or diagrams\n\nInstall youtube-dl and ffmpeg with scoop\n\n`scoop install youtube-dl ffmpeg`\n\nConvert ShaderMotion videos into WebM VP9.\n\n`youtube-dl https://www.youtube.com/playlist?list=PLmwqDOin_Zt4WCMWqoK6SdHlg0C_WeCP6 --audio-format wav --format webm --recode-video webm`\n\nCrop the preview frame of the video for the left and the right side.\n\n```\nffmpeg -i \"NNNN.webm\" \"-filter:v\" \"crop=in_w*(1-0.925):ih:0:0,fps=60,scale=24x180:flags=lanczos+full_chroma_inp\" shader_motion_character_00.webm\nffmpeg -i \"NNNN.webm\" \"-filter:v\" \"crop=in_w*(1-0.925):in_h:in_w:in_h,fps=60,scale=24x180:flags=lanczos+full_chroma_inp\" shader_motion_character_0\n```\n\n## How to build Godot video decoder\n\nBuild godot-cpp\n\n```\ngodot.windows.opt.tools.64.exe --gdnative-generate-json-api api.json\ngodot.windows.opt.tools.64.exe --gdnative-generate-json-builtin-api builtin_api.json\n# copy to godot-cpp\n# compile godot-cpp\n# Use instructions for 4\n# https://github.com/GodotVR/godot_openvr/pull/123#issue-658898644\nscons p=windows target=release -j16 target=release generate_bindings=yes\n# compile gdnative-video-decoder\nscons platform=win64 target=release -j16\n```\n\n## Positive Consequences <!-- optional -->\n\n- Can interchange motions\n\n## Negative Consequences <!-- optional -->\n\n- Complexity\n\n## If this enhancement will not be used often, can it be worked around with a few lines of script?\n\nNot trivial.\n\n## Is there a reason why this should be core and done by us?\n\nThe ability to give motion to 3d characters or NPCS is important.\n\nThe ability to interchange pose is important.\n\n## References <!-- optional -->\n\n- https://motion.chibifire.com\n- https://github.com/ytdl-org/youtube-dl\n- https://github.com/FFmpeg/FFmpeg\n\n## Derivative License\n\nCopyright (c) 2020-2021 V-Sekai contributors.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"},"creationDate":"2021-06-23T07:34:31.000Z","lastEditDate":"2021-11-30T19:35:23.000Z","lastEditAuthor":"K. S. Ernest (iFire) Lee","publicationDate":null,"file":{"relativePath":"docs/decisions/20210622-shadermotion-to-godot-engine.md","absolutePath":"/home/runner/work/v-sekai-proposals/v-sekai-proposals/docs/decisions/20210622-shadermotion-to-godot-engine.md"},"repository":{"provider":"github","viewUrl":"https://github.com/V-Sekai/v-sekai-proposals/blob/master/docs/decisions/20210622-shadermotion-to-godot-engine.md"}},"l4bVersion":"1.0.0-beta.11"},"__N_SSG":true}