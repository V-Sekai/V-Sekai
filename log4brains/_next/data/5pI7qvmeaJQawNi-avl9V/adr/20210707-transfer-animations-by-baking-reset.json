{"pageProps":{"projectName":"V-Sekai","currentAdr":{"slug":"20210707-transfer-animations-by-baking-reset","package":null,"title":"Transfer animations by baking reset","status":"accepted","supersededBy":null,"tags":[],"deciders":[],"body":{"enhancedMdx":"\n## Context and Problem Statement\n\nGiven two animation `.glb`s in gltf, you cannot transfer the animations between the same character in different files in some cases.\n\nFixes: https://github.com/godotengine/godot/issues/50212\n\nWe are NOT retargeting between different rigs in the RESET baker stage. \n\nWe are NOT defining how to generate the RESET animation in this proposal.\n\n#### Problem extended\n\nWe want to transfer animations between exact scenes with the same matching RESET animation.\n\nWe can import unlimited motion capture animations to use if we can enforce a certain T-POSE and ensure the rigs are corresponding.\n\nMultiple different specifications exist on bone rolls on specific bone names. If the skeleton matches one of them, we can use that set of rig animations.\n\n## Describe the proposed option and how it helps to overcome the problem or limitation\n\nWe bake the RESET animation and then set it to identity so that rigs with corresponding RESET animation can have their animations transferred.\n\n## Describe how your proposal will work, with code, pseudo-code, mock-ups, or diagrams\n\n#### Bake RESET animation\n\n1. Import a new scene with animations.\n1. A RESET animation from the imported scene will automatically be baked to the skeleton.\n1. Key all RESET animation frames to identity.\n\n#### Bake a specific frame\n\n1. Pick an animation frame time and click\n2. First bake any existing RESET animation.\n3. Bake the RESET animation\n4. Ensure that a RESET animation track exists and is set to identity transform\n\n#### RESET Animation Generators\n\n1. Make a tool that can take a human character and make it T-pose (A-pose?) and then save it to the RESET animation.\n1. Enforce bone rolls on the rig and then save it to the RESET animation.\n1. Root motion centering (move to the origin) tool and then save it as the RESET animation. \n1. Filter the RESET axes when baking per animation.\n\n## If this enhancement will not be used often, can it be worked around with a few lines of script?\n\nThis is a confusing problem and hard to explain. So the code to solve it is non-obvious to propose and non-trivial to discover.\n\n## Is there a reason why this should be core and done by us?\n\nAnimations are a core feature of Godot Engine.\n\n## References <!-- optional -->\n\n* Bone roll parent to child baking.  https://github.com/V-Sekai/godot/commit/99a9f79e25f7760cb5a0990e67545d78e9dd0423\n* Implementation: \nhttps://github.com/godot-extended-libraries/godot-fire/tree/feature/bake-reset-anim \n* Reference bone roll spec. https://tokage.info/lab/?id=5\n* Use the entire surface of the mesh to match to the SMPL rig. (Siggraph 2021) https://github.com/PeizhuoLi/neural-blend-shapes/issues\n* Guessing \"Blender edit\" https://github.com/KhronosGroup/glTF-Blender-IO/pull/941\n\n## Derivative License\n\nCopyright (c) 2020-2021 V-Sekai contributors.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"},"creationDate":"2021-07-08T03:11:31.000Z","lastEditDate":"2021-11-30T19:26:08.000Z","lastEditAuthor":"K. S. Ernest (iFire) Lee","publicationDate":null,"file":{"relativePath":"docs/decisions/20210707-transfer-animations-by-baking-reset.md","absolutePath":"/home/runner/work/v-sekai-proposals/v-sekai-proposals/docs/decisions/20210707-transfer-animations-by-baking-reset.md"},"repository":{"provider":"github","viewUrl":"https://github.com/V-Sekai/v-sekai-proposals/blob/master/docs/decisions/20210707-transfer-animations-by-baking-reset.md"}},"l4bVersion":"1.0.0-beta.11"},"__N_SSG":true}