{"pageProps":{"projectName":"V-Sekai","currentAdr":{"slug":"20211005-test-google-mediapipe","package":null,"title":"Test Google Mediapipe","status":"accepted","supersededBy":null,"tags":[],"deciders":[],"body":{"enhancedMdx":"\n## Context and Problem Statement\n\nWe're unable to test media pipe for iris.\n\n## Describe the proposed option and how it helps to overcome the problem or limitation\n\nSetup github actions so we can package mediapipe to demo iris tracking.\n\n## Describe how your proposal will work, with code, pseudo-code, mock-ups, or diagrams\n\n1. setup cicd for linux to media pipe\n2. setup cid for media pipe iris tracking\n3. create win10 support\n\n#### Get video for linux info (optional)\n\n```bash\nsudo apt install v4l-utils -y\nv4l2-ctl --all\n```\n\n#### Realsense Camera (optional)\n\n```\nsudo apt-get update && sudo apt-get upgrade && sudo apt-get dist-upgrade\ngit clone https://github.com/IntelRealSense/librealsense.git\ncd librealsense\nsudo apt-get install git libssl-dev libusb-1.0-0-dev pkg-config libgtk-3-dev -y\nsudo apt-get install libglfw3-dev libgl1-mesa-dev libglu1-mesa-dev -y\n./scripts/setup_udev_rules.sh\n# Use Postos 21.04 NVIDIA\nmkdir build && cd build\ncmake ../ -DBUILD_EXAMPLES=true -DCMAKE_BUILD_TYPE=Release\nsudo make uninstall && make clean && make && sudo make install -j`nproc`\n```\n\n# Reconnect the Intel RealSense depth camera and run: realsense-viewer to verify the installation.\n\n#### Hello World in C++\n\n```bash\nsudo apt install apt-transport-https curl gnupg -y\ncurl -fsSL https://bazel.build/bazel-release.pub.gpg | gpg --dearmor > bazel.gpg\nsudo mv bazel.gpg /etc/apt/trusted.gpg.d/\necho \"deb [arch=amd64] https://storage.googleapis.com/bazel-apt stable jdk1.8\" | sudo tee /etc/apt/sources.list.d/bazel.list\nsudo apt update && sudo apt install bazel-3.7.2 -y\ngit clone https://github.com/google/mediapipe.git\ncd mediapipe\n\nsudo apt install python-is-python3 -y\n\nexport GLOG_logtostderr=1\n# Need bazel flag 'MEDIAPIPE_DISABLE_GPU=1' as desktop GPU is not supported currently.\nbazel-3.7.2 run --define MEDIAPIPE_DISABLE_GPU=1 \\\n    mediapipe/examples/desktop/hello_world:hello_world\nchmod +x setup_opencv.sh && ./setup_opencv.sh\nbazel-3.7.2 build --define MEDIAPIPE_DISABLE_GPU=1 mediapipe/examples/desktop/iris_tracking:iris_tracking_cpu\n# Ensure a webcam is plugged in.\n./bazel-bin/mediapipe/examples/desktop/iris_tracking/iris_tracking_cpu --calculator_graph_config_file=./mediapipe/graphs/iris_tracking/iris_tracking_cpu.pbtxt\n```\n\n### Alternative instructions for realsense\n\n```bash\n./bazel-bin/mediapipe/examples/desktop/iris_tracking/iris_tracking_cpu --calculator_graph_config_file=./mediapipe/graphs/iris_tracking/iris_tracking_cpu.pbtxt --input_video_path=/dev/video6\n```\n\n### create win10 support\n\nTeach bazel llvm-mingw support.\n\n## Positive Consequences <!-- optional -->\n\nAble to mocap faces.\n\nAble to use the human body as vr controllers.\n\n## Negative Consequences <!-- optional -->\n\n_No response_\n\n## If this enhancement will not be used often, can it be worked around with a few lines of script?\n\nPose estimation is interesting and we have someone who wants to collaborate.\n\n## Is there a reason why this should be core and done by us?\n\n_No response_\n\n## References <!-- optional -->\n\n- https://google.github.io/mediapipe/getting_started/hello_world_cpp.html\n- https://google.github.io/mediapipe/getting_started/cpp.html\n- https://google.github.io/mediapipe/solutions/iris.html\n- https://github.com/google/mediapipe/issues/1530\n- https://github.com/V-Sekai/mediapipe\n\n## Derivative License\n\nCopyright (c) 2020-2021 V-Sekai contributors.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"},"creationDate":"2021-10-05T20:08:55.000Z","lastEditDate":"2021-11-30T18:53:57.000Z","lastEditAuthor":"K. S. Ernest (iFire) Lee","publicationDate":null,"file":{"relativePath":"docs/decisions/20211005-test-google-mediapipe.md","absolutePath":"/home/runner/work/v-sekai-proposals/v-sekai-proposals/docs/decisions/20211005-test-google-mediapipe.md"},"repository":{"provider":"github","viewUrl":"https://github.com/V-Sekai/v-sekai-proposals/blob/master/docs/decisions/20211005-test-google-mediapipe.md"}},"l4bVersion":"1.0.0-beta.11"},"__N_SSG":true}